query GetIssues(
  $sort: [IssueSortInput!]
  $filter: IssueFilter
  $after: String
  $first: Int = 50
) {
  issues(sort: $sort, filter: $filter, after: $after, first: $first) {
    nodes {
      id
      identifier
      title
      priority
      description
      team {
        id
        name
        color
      }
      assignee {
        id
        email
        displayName
        isMe
      }
      project {
        name
        color
      }
      state {
        name
        color
        position
      }
      labels {
        nodes {
          name
          color
        }
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}

query SearchIssues($term: String!, $after: String, $first: Int = 50) {
  searchIssues(term: $term, after: $after, first: $first) {
    totalCount
    pageInfo {
      hasNextPage
      endCursor
    }
    nodes {
      id
      identifier
      title
      priority
      description
      team {
        id
        name
        color
      }
      assignee {
        id
        email
        displayName
        isMe
      }
      project {
        name
        color
      }
      state {
        name
        color
        position
      }
      labels {
        nodes {
          name
          color
        }
      }
    }
  }
}

mutation UpdateIssue($input: IssueUpdateInput!, $issueUpdateId: String!) {
  issueUpdate(input: $input, id: $issueUpdateId) {
    success
    issue {
      id
      identifier
      title
      priority
      description
      team {
        id
        name
        color
      }
      assignee {
        id
        email
        displayName
        isMe
      }
      project {
        name
        color
      }
      state {
        name
        color
        position
      }
      labels {
        nodes {
          name
          color
        }
      }
    }
  }
}

mutation UnassignIssue($issueUpdateId: String!) {
  issueUpdate(input: { assigneeId: null }, id: $issueUpdateId) {
    success
    issue {
      id
      identifier
      title
      priority
      description
      team {
        id
        name
        color
      }
      assignee {
        id
        email
        displayName
        isMe
      }
      project {
        name
        color
      }
      state {
        name
        color
        position
      }
      labels {
        nodes {
          name
          color
        }
      }
    }
  }
}
